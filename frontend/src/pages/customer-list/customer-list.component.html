<div class="container">
  <h2>Ügyfelek</h2>

  <!-- Új ügyfél hozzáadása -->
  <form (ngSubmit)="addCustomer()" #customerForm="ngForm" class="mb-4">
    <div class="row g-3">
      <div class="col-md-3">
        <label for="fullName">Név</label>
        <input
          type="text"
          id="fullName"
          name="fullName"
          class="form-control"
          [(ngModel)]="newCustomer.fullName"
          required
        />
      </div>
      <div class="col-md-3">
        <label for="address">Cím</label>
        <input
          type="text"
          id="address"
          name="address"
          class="form-control"
          [(ngModel)]="newCustomer.address"
          required
        />
      </div>
      <div class="col-md-3">
        <label for="idNumber">Igazolványszám</label>
        <input
          type="text"
          id="idNumber"
          name="idNumber"
          class="form-control"
          [(ngModel)]="newCustomer.idNumber"
          pattern="^[0-9]{6}[A-Za-z]{2}$"
          maxlength="8"
          required
        />
<small class="text-muted">Formátuma 6 szám + 2 betű</small>
      </div>
      <div class="col-md-3">
        <label for="phoneNumber">Telefonszám</label>
        <input
            type="text"
            id="phoneNumber"
            name="phoneNumber"
            class="form-control"
            [(ngModel)]="newCustomer.phoneNumber"
            maxlength="11"
            required
          />
      </div>
    </div>

    <button
      class="btn btn-primary mt-3"
      type="submit"
      [disabled]="!customerForm.form.valid"
    >
      Hozzáadás
    </button>

    <div *ngIf="error" class="alert alert-danger mt-2">{{ error }}</div>
  </form>

  <!-- Ügyfél lista -->
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Név</th>
        <th>Cím</th>
        <th>Igazolványszám</th>
        <th>Telefonszám</th>
        <th>Művelet</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let c of customers">
        <td>{{ c.fullName }}</td>
        <td>{{ c.address }}</td>
        <td>{{ c.idNumber }}</td>
        <td>{{ c.phoneNumber }}</td>
        <td>
          <button
            class="btn btn-sm btn-danger"
            (click)="deleteCustomer(c.id)"
          >
            Törlés
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
